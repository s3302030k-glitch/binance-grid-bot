# ๐ค ุฑุจุงุช ูุนุงููุงุช Grid - ุฑุงูููุง ฺฉุงูู ูุงุฑุณ

## ๐ ููุฑุณุช ูุทุงูุจ

1. [ูุนุฑู](#ูุนุฑู)
2. [ูุตุจ ู ุฑุงูโุงูุฏุงุฒ](#ูุตุจ-ู-ุฑุงูโุงูุฏุงุฒ)
3. [ุชูุธูุงุช](#ุชูุธูุงุช)
4. [ุงุณุชุฑุงุชฺ ูุนุงููุงุช](#ุงุณุชุฑุงุชฺ-ูุนุงููุงุช)
5. [ุณุณุชูโูุง ูุญุงูุธุช](#ุณุณุชูโูุง-ูุญุงูุธุช)
6. [Backtest](#backtest)
7. [ุนุจโุงุจ](#ุนุจโุงุจ)

---

## ูุนุฑู

ุงู ุฑุจุงุช ฺฉ **Grid Trading Bot** ุงุณุช ฺฉู ุงุฒ ุงูุฏฺฉุงุชูุฑ **ATR (Average True Range)** ุจุฑุง ูุญุงุณุจู ูพูุง ุณุทูุญ ฺฏุฑุฏ ุงุณุชูุงุฏู ูโฺฉูุฏ.

### ูฺฺฏโูุง:
- โ ูุญุงุณุจู ูพูุง Grid ุจุฑ ุงุณุงุณ ATR
- โ ููุชุฑ ุฑููุฏ EMA-50
- โ Trailing Stop 3%
- โ Position Sizing ูพูุง
- โ Emergency Stop ุฎูุฏฺฉุงุฑ
- โ ุฐุฎุฑูโุณุงุฒ ูุถุนุช (State Persistence)
- โ ุงุนูุงู ุชูฺฏุฑุงู

---

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- Python 3.10+
- ุญุณุงุจ Binance (Testnet ุง Mainnet)
- ฺฉูุฏ API Binance

### ูุฑุงุญู ูุตุจ

```bash
# 1. ูุตุจ ูุงุจุณุชฺฏโูุง
pip install -r requirements.txt

# 2. ฺฉูพ ูุงู ุชูุธูุงุช
copy .env.example .env

# 3. ูุฑุงุด .env ู ุงุถุงูู ฺฉุฑุฏู API Key
notepad .env
```

### ุชูุธู ูุงู .env

```env
# Binance API
BINANCE_API_KEY=ฺฉูุฏ_API_ุดูุง
BINANCE_API_SECRET=ฺฉูุฏ_Secret_ุดูุง
USE_TESTNET=True

# ุชูฺฏุฑุงู (ุงุฎุชุงุฑ)
TELEGRAM_BOT_TOKEN=ุชูฺฉู_ุจุงุช_ุดูุง
TELEGRAM_CHAT_ID=ุขุฏ_ฺุช_ุดูุง
```

### ุงุฌุฑุง ุฑุจุงุช

```bash
python main.py
```

---

## ุชูุธูุงุช

### ูพุงุฑุงูุชุฑูุง ุงุตู (main.py)

| ูพุงุฑุงูุชุฑ | ููุฏุงุฑ ูพุดโูุฑุถ | ุชูุถุญ |
|---------|---------------|-------|
| `SYMBOL` | `BTC/USDT` | ุฌูุช ูุนุงููุงุช |
| `TIMEFRAME` | `1h` | ุชุงูโูุฑู |
| `ATR_PERIOD` | `14` | ุฏูุฑู ATR |
| `EMA_PERIOD` | `50` | ุฏูุฑู EMA |
| `N_LEVELS` | `10` | ุชุนุฏุงุฏ ุณุทูุญ ฺฏุฑุฏ |
| `ATR_MULTIPLIER` | `2.0` | ุถุฑุจ ATR |
| `ALLOCATION_PERCENT` | `2.0%` | ุฏุฑุตุฏ ุชุฎุตุต ูุฑ ุณุทุญ |

### ูพุงุฑุงูุชุฑูุง ูุญุงูุธุช

| ูพุงุฑุงูุชุฑ | ููุฏุงุฑ | ุชูุถุญ |
|---------|-------|-------|
| `STOP_LOSS_BUFFER` | `2%` | ุจุงูุฑ Emergency Stop |
| `TRAILING_STOP_PCT` | `3%` | ุฏุฑุตุฏ Trailing Stop |
| `ATR_RECALC_THRESHOLD` | `20%` | ุขุณุชุงูู ุจุงุฒูุญุงุณุจู Grid |

---

## ุงุณุชุฑุงุชฺ ูุนุงููุงุช

### ูุญูู ฺฉุงุฑ Grid Bot

```
Upper Bound ($104,000) โโโโโโโโโโโ SELL Level 10
                       โ
                       โ  Grid Spacing = $889
                       โ
Current Price ($100k)  โโโโโโโโโโโ Mixed Levels
                       โ
                       โ
Lower Bound ($96,000)  โโโโโโโโโโโ BUY Level 1
```

### ููุทู ูุนุงููู

1. **ุณูุงุฑุดุงุช ุฒุฑ ููุช ูุนู:** `BUY` (ุฎุฑุฏ)
2. **ุณูุงุฑุดุงุช ุจุงูุง ููุช ูุนู:** `SELL` (ูุฑูุด)
3. **ููุช BUY ูพุฑ ุดุฏ:** โ SELL ุฏุฑ ุณุทุญ ุจุงูุงุชุฑ
4. **ููุช SELL ูพุฑ ุดุฏ:** โ BUY ุฏุฑ ุณุทุญ ูพุงูโุชุฑ

### ููุชุฑ ุฑููุฏ EMA

```
ููุช > EMA ร 1.02  โ  ุฑููุฏ ุตุนูุฏ  โ  BUY ูุฌุงุฒ โ
ููุช < EMA ร 0.98  โ  ุฑููุฏ ูุฒูู  โ  BUY ูุณุฏูุฏ โ
```

**ูุฒุช:** ุฌููฺฏุฑ ุงุฒ ุฎุฑุฏ ุฏุฑ ุฑููุฏ ูุฒูู

---

## ุณุณุชูโูุง ูุญุงูุธุช

### 1. Emergency Stop (ุชููู ุงุถุทุฑุงุฑ)

ุงฺฏุฑ ููุช **2% ุฒุฑ** ุญุฏ ูพุงู ฺฏุฑุฏ ุจุฑูุฏ:
- โ ููู ุณูุงุฑุดุงุช ูุบู ูโุดููุฏ
- โ ุฑุจุงุช ูุชููู ูโุดูุฏ
- โ ูุงุฒ ุจู ูุฏุงุฎูู ุฏุณุช

**ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ:**
```bash
# 1. ูุฑุงุด state.json
notepad data/state.json

# 2. ุชุบุฑ ุงู ููุฏุงุฑ ุจู false:
"is_emergency_stopped": false

# 3. ุงุฌุฑุง ูุฌุฏุฏ
python main.py
```

### 2. Trailing Stop (3%)

- ูุฑ ูพูุฒุดู ุจุงุฒุ ฺฉ `peak_price` ุฏุงุฑุฏ
- ุงฺฏุฑ ููุช **3% ุงุฒ peak** ุงูุช ฺฉูุฏ โ ูุฑูุด Market
- ุณูุฏ ุญูุธ ูโุดูุฏุ ุถุฑุฑ ูุญุฏูุฏ ูโุดูุฏ

### 3. Grid Recalculation

ุงฺฏุฑ ATR ูุนู **20% ูุชูุงูุช** ุงุฒ ATR ุงููู ุจุงุดุฏ:
- ุฑุจุงุช ูุดุฏุงุฑ ูโุฏูุฏ
- ูโุชูุงู ฺฏุฑุฏ ุฑุง ุจุงุฒูุญุงุณุจู ฺฉุฑุฏ

---

## Backtest

### ุงุฌุฑุง Backtest

```bash
python backtest_runner.py --symbol BTC/USDT --days 30 --balance 10000
```

### ูพุงุฑุงูุชุฑูุง

| ุขูพุดู | ุชูุถุญ |
|------|-------|
| `--symbol` | ุฌูุช ูุนุงููุงุช |
| `--days` | ุชุนุฏุงุฏ ุฑูุฒ |
| `--balance` | ุณุฑูุงู ุงููู |
| `--levels` | ุชุนุฏุงุฏ ุณุทูุญ |
| `--atr-multiplier` | ุถุฑุจ ATR |

### ููููู ุฎุฑูุฌ

```
๐ BACKTEST RESULTS
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
Initial Balance:   $10,000.00
Final Equity:      $10,847.00
Total Profit:      $847.00
Total Fees Paid:   $23.45
Total Return:      8.47%
Max Drawdown:      3.21%
Win Rate:          78.5%
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ข Excellent Performance!
```

---

## ุนุจโุงุจ

### ุฎุทุง ุงุญุฑุงุฒ ููุช
```
[AUTH ERROR] Authentication failed
```
**ุฑุงูโุญู:** ฺฉูุฏ API ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ุฎุทุง ุดุจฺฉู
```
[NETWORK ERROR] Network error
```
**ุฑุงูโุญู:** ุงูุชุฑูุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ุฑุจุงุช ูุจูุงู ุฏุฑ ุญุงู ุงุฌุฑุงุณุช
```
[ERROR] Bot is already running (PID: xxxx)
```
**ุฑุงูโุญู:**
```bash
del data\bot.lock
```

### Emergency Stop ูุนุงู ุงุณุช
```
โ๏ธ EMERGENCY STOP ACTIVE
```
**ุฑุงูโุญู:** ุจู ุจุฎุด Emergency Stop ูุฑุงุฌุนู ฺฉูุฏ

---

## โ๏ธ ูุดุฏุงุฑ ุฑุณฺฉ

> **ุชูุฌู:** ูุนุงููู ุงุฑุฒูุง ุฏุฌุชุงู ุฑุณฺฉ ุจุงูุง ุฏุงุฑุฏ.
> 
> - ุงุจุชุฏุง ุจุง **Testnet** ุชุณุช ฺฉูุฏ
> - ุจุง ุณุฑูุงูโุง ูุนุงููู ฺฉูุฏ ฺฉู **ุชูุงู ุงุฒ ุฏุณุช ุฏุงุฏูุด** ุฑุง ุฏุงุฑุฏ
> - ุฑุจุงุช **ุชุถูู ุณูุฏ ููโุฏูุฏ**

---

## ๐ ูพุดุชุจุงู

- ูุณุชูุฏุงุช: ุงู ูุงู
- ูุงฺฏโูุง: `logs/exchange.log`
- ูุถุนุช: `data/state.json`
